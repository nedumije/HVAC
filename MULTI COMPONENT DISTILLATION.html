<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multicomponent Distillation Simulation | Chemical Engineering Toolkit</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --success-color: #27ae60;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 1.5rem 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 100;
        }
        
        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .logo img {
            height: 40px;
        }
        
        .logo h1 {
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 1.5rem;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            padding: 0.5rem 0;
            position: relative;
        }
        
        nav a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: white;
            transition: width 0.3s ease;
        }
        
        nav a:hover::after {
            width: 100%;
        }
        
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
        }
        
        .hero {
            background: white;
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
            text-align: center;
        }
        
        .hero h2 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-size: 2rem;
        }
        
        .hero p {
            color: #666;
            max-width: 800px;
            margin: 0 auto 1.5rem;
        }
        
        .simulation-container {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        @media (max-width: 768px) {
            .simulation-container {
                grid-template-columns: 1fr;
            }
        }
        
        .control-panel {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .control-panel h3 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #eee;
            font-size: 1.25rem;
        }
        
        .form-group {
            margin-bottom: 1.25rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #555;
        }
        
        .form-group input,
        .form-group select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
            transition: border 0.3s ease;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            border-color: var(--secondary-color);
            outline: none;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        
        .component-list {
            margin-top: 1rem;
            border: 1px solid #eee;
            border-radius: 4px;
            padding: 0.5rem;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .component-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .component-item:last-child {
            border-bottom: none;
        }
        
        .btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .btn-block {
            display: block;
            width: 100%;
        }
        
        .btn-danger {
            background-color: var(--accent-color);
        }
        
        .btn-danger:hover {
            background-color: #c0392b;
        }
        
        .btn-success {
            background-color: var(--success-color);
        }
        
        .btn-success:hover {
            background-color: #219955;
        }
        
        .btn-group {
            display: flex;
            gap: 0.75rem;
            margin-top: 1rem;
        }
        
        .visualization-panel {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .graph-container {
            height: 350px;
            border: 1px solid #eee;
            border-radius: 4px;
        }
        
        .tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 1rem;
        }
        
        .tab {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            font-weight: 500;
            color: #666;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .tab.active {
            color: var(--secondary-color);
            border-bottom-color: var(--secondary-color);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .distillation-column {
            position: relative;
            height: 300px;
            margin: 2rem auto;
            width: 200px;
            border: 3px solid var(--primary-color);
            border-radius: 10px;
            overflow: hidden;
        }
        
        .tray {
            position: absolute;
            width: 100%;
            height: 20px;
            background-color: #ddd;
            border-top: 1px solid #999;
            border-bottom: 1px solid #999;
        }
        
        .liquid {
            position: absolute;
            bottom: 0;
            width: 100%;
            background-color: rgba(52, 152, 219, 0.6);
            transition: height 1s ease;
        }
        
        .vapor {
            position: absolute;
            top: 0;
            width: 100%;
            background-color: rgba(231, 76, 60, 0.4);
            transition: height 1s ease;
        }
        
        .reboiler {
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 30px;
            background-color: #ccc;
            border-radius: 0 0 10px 10px;
        }
        
        .condenser {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 30px;
            background-color: #ccc;
            border-radius: 10px 10px 0 0;
        }
        
        .results-panel {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .result-card {
            background: #f8f9fa;
            border-radius: 6px;
            padding: 1rem;
            border-left: 4px solid var(--secondary-color);
        }
        
        .result-card h4 {
            color: #555;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }
        
        .result-card p {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .challenges-section {
            background: white;
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
        }
        
        .challenges-section h3 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
        }
        
        .challenge {
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #eee;
        }
        
        .challenge:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }
        
        .challenge h4 {
            color: var(--accent-color);
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .challenge p {
            color: #666;
        }
        
        .solution {
            background: #f0f8ff;
            padding: 0.75rem;
            border-radius: 4px;
            margin-top: 0.75rem;
            border-left: 3px solid var(--secondary-color);
        }
        
        .solution strong {
            color: var(--primary-color);
        }
        
        footer {
            background: var(--dark-color);
            color: white;
            padding: 2rem 0;
            margin-top: 3rem;
        }
        
        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }
        
        .footer-column h4 {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            position: relative;
            padding-bottom: 0.5rem;
        }
        
        .footer-column h4::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40px;
            height: 2px;
            background-color: var(--secondary-color);
        }
        
        .footer-column ul {
            list-style: none;
        }
        
        .footer-column ul li {
            margin-bottom: 0.5rem;
        }
        
        .footer-column a {
            color: #bbb;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .footer-column a:hover {
            color: white;
        }
        
        .copyright {
            text-align: center;
            padding-top: 2rem;
            margin-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #bbb;
            font-size: 0.9rem;
        }
        
        /* Animation classes */
        .bubble {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 50%;
            pointer-events: none;
        }
        
        @keyframes float-up {
            0% {
                transform: translateY(0);
                opacity: 1;
            }
            100% {
                transform: translateY(-100px);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo">
                <img src="https://via.placeholder.com/40x40" alt="Logo">
                <h1>ChemEng Toolkit</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="#simulation">Simulation</a></li>
                    <li><a href="#challenges">Challenges</a></li>
                    <li><a href="#documentation">Documentation</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="container">
        <section class="hero">
            <h2>Multicomponent Distillation Simulation & Design</h2>
            <p>An interactive tool for simulating and analyzing multicomponent distillation columns with real-time visualization of composition profiles, temperature gradients, and phase equilibria.</p>
            <button class="btn btn-success" id="startDemo">Start Demo Animation</button>
        </section>

        <section id="simulation" class="simulation-container">
            <div class="control-panel">
                <h3>Simulation Parameters</h3>
                
                <div class="form-group">
                    <label for="columnType">Column Type</label>
                    <select id="columnType">
                        <option value="binary">Binary Distillation</option>
                        <option value="multicomponent" selected>Multicomponent Distillation</option>
                        <option value="azeotropic">Azeotropic Distillation</option>
                        <option value="extractive">Extractive Distillation</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="feedComposition">Feed Composition (mol%)</label>
                    <div class="component-list" id="componentList">
                        <!-- Components will be added here dynamically -->
                    </div>
                    <div class="form-group" style="display: flex; gap: 0.5rem; margin-top: 0.5rem;">
                        <input type="text" id="newComponent" placeholder="Component name" style="flex: 1;">
                        <input type="number" id="newPercentage" placeholder="%" min="0" max="100" step="1" style="width: 70px;">
                        <button class="btn" id="addComponent" style="padding: 0.5rem;">Add</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="feedRate">Feed Flow Rate (kmol/hr)</label>
                    <input type="number" id="feedRate" value="100" min="1" step="1">
                </div>
                
                <div class="form-group">
                    <label for="feedTemperature">Feed Temperature (¬∞C)</label>
                    <input type="number" id="feedTemperature" value="80" min="-50" max="300" step="1">
                </div>
                
                <div class="form-group">
                    <label for="refluxRatio">Reflux Ratio</label>
                    <input type="number" id="refluxRatio" value="1.5" min="0.1" step="0.1">
                </div>
                
                <div class="form-group">
                    <label for="pressure">Operating Pressure (bar)</label>
                    <input type="number" id="pressure" value="1" min="0.1" step="0.1">
                </div>
                
                <div class="form-group">
                    <label for="trays">Number of Theoretical Trays</label>
                    <input type="number" id="trays" value="15" min="1" max="50" step="1">
                </div>
                
                <div class="form-group">
                    <label for="feedTray">Feed Tray Location</label>
                    <input type="number" id="feedTray" value="7" min="1" max="15" step="1">
                </div>
                
                <div class="btn-group">
                    <button class="btn btn-block" id="runSimulation">Run Simulation</button>
                    <button class="btn btn-danger" id="resetSimulation">Reset</button>
                </div>
            </div>
            
            <div class="visualization-panel">
                <div class="tabs">
                    <div class="tab active" data-tab="column">Column Animation</div>
                    <div class="tab" data-tab="composition">Composition Profile</div>
                    <div class="tab" data-tab="temperature">Temperature Profile</div>
                    <div class="tab" data-tab="equilibrium">Phase Equilibrium</div>
                </div>
                
                <div class="tab-content active" id="column-tab">
                    <div class="distillation-column" id="distillationColumn">
                        <div class="condenser"></div>
                        <div class="reboiler"></div>
                        <!-- Trays will be added dynamically -->
                    </div>
                    <div style="text-align: center;">
                        <button class="btn" id="animateColumn">Animate Column</button>
                    </div>
                </div>
                
                <div class="tab-content" id="composition-tab">
                    <div class="graph-container" id="compositionGraph"></div>
                </div>
                
                <div class="tab-content" id="temperature-tab">
                    <div class="graph-container" id="temperatureGraph"></div>
                </div>
                
                <div class="tab-content" id="equilibrium-tab">
                    <div class="graph-container" id="equilibriumGraph"></div>
                </div>
            </div>
        </section>
        
        <section class="results-panel">
            <h3>Simulation Results</h3>
            <div class="results-grid" id="resultsGrid">
                <!-- Results will be populated here -->
                <div class="result-card">
                    <h4>Distillate Purity</h4>
                    <p id="distillatePurity">--</p>
                </div>
                <div class="result-card">
                    <h4>Bottoms Purity</h4>
                    <p id="bottomsPurity">--</p>
                </div>
                <div class="result-card">
                    <h4>Minimum Reflux Ratio</h4>
                    <p id="minReflux">--</p>
                </div>
                <div class="result-card">
                    <h4>Column Diameter</h4>
                    <p id="columnDiameter">-- m</p>
                </div>
                <div class="result-card">
                    <h4>Condenser Duty</h4>
                    <p id="condenserDuty">-- kW</p>
                </div>
                <div class="result-card">
                    <h4>Reboiler Duty</h4>
                    <p id="reboilerDuty">-- kW</p>
                </div>
            </div>
        </section>
        
        <section id="challenges" class="challenges-section">
            <h3>Key Challenges in Multicomponent Distillation</h3>
            
            <div class="challenge">
                <h4><span>üîç</span> Non-Ideal Phase Behavior</h4>
                <p>Multicomponent systems often exhibit non-ideal behavior with azeotropes, tangent pinches, and complex phase equilibria that complicate separation.</p>
                <div class="solution">
                    <strong>Solution:</strong> Use rigorous thermodynamic models (NRTL, UNIQUAC) and consider extractive/azeotropic distillation for difficult separations.
                </div>
            </div>
            
            <div class="challenge">
                <h4><span>‚öñÔ∏è</span> Composition Profiles</h4>
                <p>Multiple components create complex composition profiles with distributed components that may peak at intermediate trays.</p>
                <div class="solution">
                    <strong>Solution:</strong> Detailed tray-by-tray calculations and sensitivity analysis to optimize feed tray location and reflux ratio.
                </div>
            </div>
            
            <div class="challenge">
                <h4><span>üå°Ô∏è</span> Temperature Gradients</h4>
                <p>Temperature profiles are non-linear and sensitive to small composition changes, affecting column operation.</p>
                <div class="solution">
                    <strong>Solution:</strong> Implement temperature control strategies and consider intermediate heat exchangers for wide-boiling mixtures.
                </div>
            </div>
            
            <div class="challenge">
                <h4><span>üîÑ</span> Heat Integration</h4>
                <p>Energy efficiency is critical but challenging due to varying temperature levels in multicomponent systems.</p>
                <div class="solution">
                    <strong>Solution:</strong> Pinch analysis and heat exchanger network optimization to maximize heat recovery.
                </div>
            </div>
            
            <div class="challenge">
                <h4><span>üìä</span> Simulation Convergence</h4>
                <p>Multicomponent simulations often face convergence difficulties due to complex thermodynamics.</p>
                <div class="solution">
                    <strong>Solution:</strong> Use robust numerical methods, good initial estimates, and consider tearing streams for complex columns.
                </div>
            </div>
        </section>
    </div>

    <footer>
        <div class="footer-container">
            <div class="footer-column">
                <h4>ChemEng Toolkit</h4>
                <p>Advanced process simulation tools for chemical engineers.</p>
                <p>Research-grade accuracy with intuitive interfaces.</p>
            </div>
            <div class="footer-column">
                <h4>Resources</h4>
                <ul>
                    <li><a href="#">Documentation</a></li>
                    <li><a href="#">Tutorial Videos</a></li>
                    <li><a href="#">Case Studies</a></li>
                    <li><a href="#">API Reference</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h4>Support</h4>
                <ul>
                    <li><a href="#">Contact Us</a></li>
                    <li><a href="#">FAQ</a></li>
                    <li><a href="#">Community Forum</a></li>
                    <li><a href="#">Bug Reports</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h4>Legal</h4>
                <ul>
                    <li><a href="#">Terms of Service</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Licensing</a></li>
                    <li><a href="#">Cookie Policy</a></li>
                </ul>
            </div>
        </div>
        <div class="copyright">
            &copy; 2023 Chemical Engineering Toolkit. All rights reserved.
        </div>
    </footer>

    <script>
        // Sample component data
        const components = [
            { name: "Methanol", percentage: 30 },
            { name: "Ethanol", percentage: 40 },
            { name: "Water", percentage: 30 }
        ];
        
        // Initialize the component list
        function initComponentList() {
            const componentList = document.getElementById('componentList');
            componentList.innerHTML = '';
            
            components.forEach((comp, index) => {
                const item = document.createElement('div');
                item.className = 'component-item';
                item.innerHTML = `
                    <span>${comp.name}</span>
                    <span>${comp.percentage}%</span>
                    <button class="btn btn-danger" style="padding: 0.25rem 0.5rem;" data-index="${index}">√ó</button>
                `;
                componentList.appendChild(item);
            });
            
            // Add event listeners to remove buttons
            document.querySelectorAll('#componentList .btn-danger').forEach(btn => {
                btn.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    components.splice(index, 1);
                    initComponentList();
                });
            });
        }
        
        // Add new component
        document.getElementById('addComponent').addEventListener('click', function() {
            const name = document.getElementById('newComponent').value.trim();
            const percentage = parseFloat(document.getElementById('newPercentage').value);
            
            if (name && !isNaN(percentage) && percentage > 0) {
                // Check if total percentage exceeds 100
                const total = components.reduce((sum, comp) => sum + comp.percentage, 0);
                if (total + percentage > 100) {
                    alert('Total composition cannot exceed 100%');
                    return;
                }
                
                components.push({ name, percentage });
                document.getElementById('newComponent').value = '';
                document.getElementById('newPercentage').value = '';
                initComponentList();
            }
        });
        
        // Tab switching
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', function() {
                // Remove active class from all tabs and contents
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                // Add active class to clicked tab and corresponding content
                this.classList.add('active');
                const tabId = this.getAttribute('data-tab');
                document.getElementById(`${tabId}-tab`).classList.add('active');
            });
        });
        
        // Initialize distillation column trays
        function initColumn() {
            const column = document.getElementById('distillationColumn');
            const trayCount = parseInt(document.getElementById('trays').value);
            const feedTray = parseInt(document.getElementById('feedTray').value);
            
            // Clear existing trays
            column.querySelectorAll('.tray').forEach(tray => tray.remove());
            
            // Calculate tray positions
            const columnHeight = 300;
            const trayHeight = 20;
            const traySpacing = (columnHeight - trayHeight * trayCount) / (trayCount + 1);
            
            // Add trays
            for (let i = 0; i < trayCount; i++) {
                const tray = document.createElement('div');
                tray.className = 'tray';
                const position = traySpacing * (i + 1) + trayHeight * i;
                tray.style.bottom = `${position}px`;
                
                // Mark feed tray
                if (i + 1 === feedTray) {
                    tray.style.backgroundColor = '#a5d8ff';
                }
                
                column.appendChild(tray);
            }
            
            // Add liquid and vapor levels
            const liquid = document.createElement('div');
            liquid.className = 'liquid';
            liquid.style.height = '0px';
            column.appendChild(liquid);
            
            const vapor = document.createElement('div');
            vapor.className = 'vapor';
            vapor.style.height = '0px';
            column.appendChild(vapor);
        }
        
        // Animate distillation column
        function animateColumn() {
            const column = document.getElementById('distillationColumn');
            const liquid = column.querySelector('.liquid');
            const vapor = column.querySelector('.vapor');
            const trays = column.querySelectorAll('.tray');
            
            // Reset animation
            liquid.style.height = '0px';
            vapor.style.height = '0px';
            
            // Animate liquid and vapor levels
            anime({
                targets: liquid,
                height: ['0px', '200px'],
                duration: 1500,
                easing: 'easeInOutQuad'
            });
            
            anime({
                targets: vapor,
                height: ['0px', '150px'],
                duration: 1500,
                delay: 500,
                easing: 'easeInOutQuad'
            });
            
            // Create bubbles for vapor animation
            createBubbles();
        }
        
        // Create vapor bubbles
        function createBubbles() {
            const column = document.getElementById('distillationColumn');
            const columnRect = column.getBoundingClientRect();
            
            for (let i = 0; i < 20; i++) {
                const bubble = document.createElement('div');
                bubble.className = 'bubble';
                
                // Random size between 3 and 8px
                const size = Math.random() * 5 + 3;
                bubble.style.width = `${size}px`;
                bubble.style.height = `${size}px`;
                
                // Random position at bottom of vapor section
                bubble.style.left = `${Math.random() * 180 + 10}px`;
                bubble.style.bottom = '150px';
                
                column.appendChild(bubble);
                
                // Animate bubble
                anime({
                    targets: bubble,
                    bottom: '250px',
                    opacity: 0,
                    duration: 2000 + Math.random() * 1000,
                    easing: 'linear',
                    complete: () => bubble.remove()
                });
            }
        }
        
        // Run simulation
        document.getElementById('runSimulation').addEventListener('click', function() {
            // Show loading state
            this.textContent = 'Running...';
            this.disabled = true;
            
            // Simulate calculation delay
            setTimeout(() => {
                // Generate random results for demonstration
                document.getElementById('distillatePurity').textContent = `${(Math.random() * 20 + 80).toFixed(1)}%`;
                document.getElementById('bottomsPurity').textContent = `${(Math.random() * 20 + 80).toFixed(1)}%`;
                document.getElementById('minReflux').textContent = (Math.random() * 0.5 + 0.8).toFixed(2);
                document.getElementById('columnDiameter').textContent = (Math.random() * 0.5 + 1.2).toFixed(2) + ' m';
                document.getElementById('condenserDuty').textContent = Math.round(Math.random() * 200 + 300) + ' kW';
                document.getElementById('reboilerDuty').textContent = Math.round(Math.random() * 250 + 350) + ' kW';
                
                // Generate composition profile
                const trayCount = parseInt(document.getElementById('trays').value);
                const trays = Array.from({ length: trayCount }, (_, i) => i + 1);
                
                const compositionData = components.map(comp => {
                    const data = [];
                    for (let i = 0; i < trayCount; i++) {
                        // Create a somewhat realistic profile
                        let value;
                        if (comp.name === "Methanol") {
                            value = 100 * Math.exp(-Math.pow((i - 2) / 5, 2));
                        } else if (comp.name === "Ethanol") {
                            value = 50 * (1 + Math.sin(i / trayCount * Math.PI * 2));
                        } else {
                            value = 100 - 100 * i / trayCount;
                        }
                        data.push(Math.max(0, value));
                    }
                    return {
                        name: comp.name,
                        y: data
                    };
                });
                
                // Plot composition profile
                const compositionTraces = compositionData.map(comp => ({
                    x: trays,
                    y: comp.y,
                    name: comp.name,
                    type: 'scatter',
                    mode: 'lines+markers'
                }));
                
                Plotly.newPlot('compositionGraph', compositionTraces, {
                    title: 'Composition Profile',
                    xaxis: { title: 'Tray Number' },
                    yaxis: { title: 'Composition (mol%)' },
                    margin: { t: 30, l: 50, r: 30, b: 50 }
                });
                
                // Generate temperature profile
                const tempProfile = trays.map(tray => {
                    // Create a somewhat realistic temperature profile
                    return 80 + (120 - 80) * (1 - Math.exp(-tray / trayCount * 3));
                });
                
                Plotly.newPlot('temperatureGraph', [{
                    x: trays,
                    y: tempProfile,
                    type: 'scatter',
                    mode: 'lines+markers',
                    line: { color: 'red' }
                }], {
                    title: 'Temperature Profile',
                    xaxis: { title: 'Tray Number' },
                    yaxis: { title: 'Temperature (¬∞C)' },
                    margin: { t: 30, l: 50, r: 30, b: 50 }
                });
                
                // Generate phase equilibrium diagram (pseudo-ternary for demo)
                if (components.length >= 2) {
                    const comp1 = components[0].name;
                    const comp2 = components[1].name;
                    
                    // Generate random equilibrium data
                    const x = [], y = [], z = [];
                    for (let i = 0; i <= 10; i++) {
                        const xVal = i * 0.1;
                        const yVal = 1 - xVal;
                        x.push(xVal * 100);
                        y.push(yVal * 100);
                        z.push(Math.random() * 30 + 70); // Random temperature
                    }
                    
                    Plotly.newPlot('equilibriumGraph', [{
                        x: x,
                        y: y,
                        z: z,
                        type: 'contour',
                        colorscale: 'Jet',
                        contours: {
                            coloring: 'heatmap'
                        },
                        hovertemplate: `${comp1}: %{x}%<br>${comp2}: %{y}%<br>Temp: %{z}¬∞C<extra></extra>`
                    }], {
                        title: `Phase Equilibrium: ${comp1} - ${comp2}`,
                        xaxis: { title: `${comp1} Composition (mol%)` },
                        yaxis: { title: `${comp2} Composition (mol%)` },
                        margin: { t: 30, l: 50, r: 30, b: 50 }
                    });
                }
                
                // Reset button state
                this.textContent = 'Run Simulation';
                this.disabled = false;
                
                // Show success message
                alert('Simulation completed successfully!');
            }, 1500);
        });
        
        // Reset simulation
        document.getElementById('resetSimulation').addEventListener('click', function() {
            // Reset input values to defaults
            document.getElementById('feedRate').value = 100;
            document.getElementById('feedTemperature').value = 80;
            document.getElementById('refluxRatio').value = 1.5;
            document.getElementById('pressure').value = 1;
            document.getElementById('trays').value = 15;
            document.getElementById('feedTray').value = 7;
            
            // Reset results
            document.querySelectorAll('#resultsGrid p').forEach(p => {
                p.textContent = '--';
                if (p.id === 'columnDiameter') p.textContent = '-- m';
                if (p.id === 'condenserDuty' || p.id === 'reboilerDuty') p.textContent = '-- kW';
            });
            
            // Clear graphs
            ['compositionGraph', 'temperatureGraph', 'equilibriumGraph'].forEach(id => {
                Plotly.purge(id);
                document.getElementById(id).innerHTML = '';
            });
        });
        
        // Animate column button
        document.getElementById('animateColumn').addEventListener('click', animateColumn);
        
        // Demo animation
        document.getElementById('startDemo').addEventListener('click', function() {
            // Set demo values
            document.getElementById('feedRate').value = 120;
            document.getElementById('feedTemperature').value = 85;
            document.getElementById('refluxRatio').value = 2.0;
            document.getElementById('trays').value = 12;
            document.getElementById('feedTray').value = 5;
            
            // Run simulation after a delay
            setTimeout(() => {
                document.getElementById('runSimulation').click();
                
                // Switch to composition tab after another delay
                setTimeout(() => {
                    document.querySelector('.tab[data-tab="composition"]').click();
                    
                    // Animate column after another delay
                    setTimeout(() => {
                        document.querySelector('.tab[data-tab="column"]').click();
                        animateColumn();
                    }, 1000);
                }, 2000);
            }, 500);
        });
        
        // Initialize on load
        window.addEventListener('DOMContentLoaded', function() {
            initComponentList();
            initColumn();
            
            // Update column when tray count changes
            document.getElementById('trays').addEventListener('change', function() {
                const feedTray = document.getElementById('feedTray');
                feedTray.max = this.value;
                if (parseInt(feedTray.value) > parseInt(this.value)) {
                    feedTray.value = this.value;
                }
                initColumn();
            });
        });
    </script>
</body>
</html>